
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Spark jobserver的安装和使用 | wzktravel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Spark-jobserver 提供了一个 RESTful 接口来提交和管理 spark 的 jobs、jars 和 job contexts。在原项目基础上做了一些本地化和优化工作。

将spark-jobserver中akka版本降级到CDH5.7中akka版本。
spark-jobserver中joda-time版本(2.9.3)与CDH5.7中joda-time版本(1.6)版本冲突，运行">
<meta property="og:type" content="article">
<meta property="og:title" content="Spark jobserver的安装和使用">
<meta property="og:url" content="http://wzktravel.github.io/2016/10/26/spark-job-server/index.html">
<meta property="og:site_name" content="wzktravel">
<meta property="og:description" content="Spark-jobserver 提供了一个 RESTful 接口来提交和管理 spark 的 jobs、jars 和 job contexts。在原项目基础上做了一些本地化和优化工作。

将spark-jobserver中akka版本降级到CDH5.7中akka版本。
spark-jobserver中joda-time版本(2.9.3)与CDH5.7中joda-time版本(1.6)版本冲突，运行">
<meta property="og:updated_time" content="2016-10-26T02:55:17.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Spark jobserver的安装和使用">
<meta name="twitter:description" content="Spark-jobserver 提供了一个 RESTful 接口来提交和管理 spark 的 jobs、jars 和 job contexts。在原项目基础上做了一些本地化和优化工作。

将spark-jobserver中akka版本降级到CDH5.7中akka版本。
spark-jobserver中joda-time版本(2.9.3)与CDH5.7中joda-time版本(1.6)版本冲突，运行">
  
    <link rel="alternative" href="/atom.xml" title="wzktravel" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
  <!--<link href="//fonts.useso.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">-->
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  <!-- -->
  <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</head>

<body>
<div id="container">
  <div id="wrap">
    <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">wzktravel</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" class="search-form">
          <input type="search" name="word" maxlength="20" class="search-form-input" placeholder="Search">
          <input type="submit" value="" class="search-form-submit">
          <input name=tn type=hidden value="bds">
          <input name=cl type=hidden value="3">
          <input name=ct type=hidden value="2097152">
          <input type="hidden" name="si" value="wzktravel.github.io">
        </form>
      </div>
    </div>
  </div>
</header>
    <div class="outer">
      <section id="main"><article id="post-spark-job-server" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/10/26/spark-job-server/" class="article-date">
  <time datetime="2016-10-26T02:12:41.000Z" itemprop="datePublished">2016-10-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Spark jobserver的安装和使用
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Spark-jobserver &#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A; RESTful &#x63A5;&#x53E3;&#x6765;&#x63D0;&#x4EA4;&#x548C;&#x7BA1;&#x7406; spark &#x7684; jobs&#x3001;jars &#x548C; job contexts&#x3002;&#x5728;&#x539F;&#x9879;&#x76EE;&#x57FA;&#x7840;&#x4E0A;&#x505A;&#x4E86;&#x4E00;&#x4E9B;&#x672C;&#x5730;&#x5316;&#x548C;&#x4F18;&#x5316;&#x5DE5;&#x4F5C;&#x3002;</p>
<ol>
<li>&#x5C06;spark-jobserver&#x4E2D;akka&#x7248;&#x672C;&#x964D;&#x7EA7;&#x5230;CDH5.7&#x4E2D;akka&#x7248;&#x672C;&#x3002;</li>
<li>spark-jobserver&#x4E2D;joda-time&#x7248;&#x672C;(2.9.3)&#x4E0E;CDH5.7&#x4E2D;joda-time&#x7248;&#x672C;(1.6)&#x7248;&#x672C;&#x51B2;&#x7A81;&#xFF0C;&#x8FD0;&#x884C;&#x65F6;&#x4F1A;&#x51FA;&#x73B0;java.lang.NoSuchMethodError: org.joda.time.DateTime.now()&#x5F02;&#x5E38;&#xFF0C;&#x5C06;spark-jobserver&#x4E2D;joda-time&#x7248;&#x672C;&#x964D;&#x7EA7;&#x5230;1.6&#x3002;</li>
<li>&#x6DFB;&#x52A0;&#x4F7F;&#x7528;mysql&#x4F5C;&#x4E3A;&#x6570;&#x636E;&#x5E93;&#x3002;</li>
<li>&#x4FEE;&#x590D;&#x63D0;&#x4EA4;job&#x540E;&#x65E0;&#x6CD5;&#x67E5;&#x770B;job&#x4FE1;&#x606F;&#x548C;&#x7ED3;&#x679C;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x53C2;&#x89C1;<a href="https://github.com/spark-jobserver/spark-jobserver/issues/516" target="_blank" rel="external">github issue#516</a>&#x3002;</li>
</ol>
<a id="more"></a>
<h2 id="&#x4ECB;&#x7ECD;"><a href="#&#x4ECB;&#x7ECD;" class="headerlink" title="&#x4ECB;&#x7ECD;"></a>&#x4ECB;&#x7ECD;</h2><h3 id="git&#x5730;&#x5740;"><a href="#git&#x5730;&#x5740;" class="headerlink" title="git&#x5730;&#x5740;"></a>git&#x5730;&#x5740;</h3><ul>
<li>github&#x5730;&#x5740;: <a href="https://github.com/spark-jobserver/spark-jobserver" target="_blank" rel="external">https://github.com/spark-jobserver/spark-jobserver</a></li>
<li>&#x6DFB;&#x52A0;cdh&#x652F;&#x6301;github&#x5730;&#x5740;: <a href="https://github.com/bjoernlohrmann/spark-jobserver" target="_blank" rel="external">https://github.com/bjoernlohrmann/spark-jobserver</a></li>
<li>&#x4F18;&#x5316;&#x540E;&#x7684;github&#x5730;&#x5740;: <a href="https://github.com/wzktravel/spark-jobserver" target="_blank" rel="external">https://github.com/wzktravel/spark-jobserver</a></li>
</ul>
<h3 id="&#x7279;&#x6027;"><a href="#&#x7279;&#x6027;" class="headerlink" title="&#x7279;&#x6027;"></a>&#x7279;&#x6027;</h3><ol>
<li>&#x201C;Spark as Service&#x201D;&#xFF1A;&#x9488;&#x5BF9; job &#x548C; contexts &#x7684;&#x5404;&#x4E2A;&#x65B9;&#x9762;&#x63D0;&#x4F9B;&#x4E86; REST &#x98CE;&#x683C;&#x7684; api &#x63A5;&#x53E3;&#x8FDB;&#x884C;&#x7BA1;&#x7406;</li>
<li>&#x652F;&#x6301; SparkSQL&#x3001;Hive&#x3001;Streaming Contexts/jobs &#x4EE5;&#x53CA;&#x5B9A;&#x5236; job contexts&#xFF01;&#x5177;&#x4F53;&#x53C2;&#x8003;Contexts</li>
<li>&#x901A;&#x8FC7;&#x96C6;&#x6210; Apache Shiro &#x6765;&#x652F;&#x6301; LDAP &#x6743;&#x9650;&#x9A8C;&#x8BC1;</li>
<li>&#x901A;&#x8FC7;&#x957F;&#x671F;&#x8FD0;&#x884C;&#x7684;job contexts&#x652F;&#x6301;&#x4E9A;&#x79D2;&#x7EA7;&#x522B;&#x4F4E;&#x5EF6;&#x8FDF;&#x7684;&#x4EFB;&#x52A1;</li>
<li>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x7ED3;&#x675F; context &#x6765;&#x505C;&#x6B62;&#x8FD0;&#x884C;&#x7684;&#x4F5C;&#x4E1A;(job)</li>
<li>&#x5206;&#x5272; jar &#x4E0A;&#x4F20;&#x6B65;&#x9AA4;&#x4EE5;&#x63D0;&#x9AD8; job &#x7684;&#x542F;&#x52A8;</li>
<li>&#x5F02;&#x6B65;&#x548C;&#x540C;&#x6B65;&#x7684; job API&#xFF0C;&#x5176;&#x4E2D;&#x540C;&#x6B65; API &#x5BF9;&#x4F4E;&#x5EF6;&#x65F6;&#x4F5C;&#x4E1A;&#x975E;&#x5E38;&#x6709;&#x6548;</li>
<li>&#x652F;&#x6301; Standalone Spark &#x548C; Mesos&#x3001;yarn</li>
<li>Job &#x548C; jar &#x4FE1;&#x606F;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x53EF;&#x63D2;&#x62D4;&#x7684; DAO &#x63A5;&#x53E3;&#x6765;&#x6301;&#x4E45;&#x5316;</li>
<li>&#x5BF9;RDD&#x6216;DataFrame&#x5BF9;&#x8C61;&#x547D;&#x540D;&#x5E76;&#x7F13;&#x5B58;&#xFF0C;&#x901A;&#x8FC7;&#x8BE5;&#x540D;&#x79F0;&#x83B7;&#x53D6;RDD&#x6216;DataFrame&#x3002;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x5BF9;&#x8C61;&#x5728;&#x4F5C;&#x4E1A;&#x95F4;&#x7684;&#x5171;&#x4EAB;&#x548C;&#x91CD;&#x7528;</li>
<li>&#x652F;&#x6301; Scala 2.10 &#x7248;&#x672C;&#x548C; 2.11 &#x7248;&#x672C;</li>
</ol>
<h2 id="&#x5B89;&#x88C5;"><a href="#&#x5B89;&#x88C5;" class="headerlink" title="&#x5B89;&#x88C5;"></a>&#x5B89;&#x88C5;</h2><p>&#x53C2;&#x8003;<a href="https://github.com/spark-jobserver/spark-jobserver#deployment" target="_blank" rel="external">https://github.com/spark-jobserver/spark-jobserver#deployment</a></p>
<h3 id="&#x914D;&#x7F6E;&#x548C;&#x5B89;&#x88C5;"><a href="#&#x914D;&#x7F6E;&#x548C;&#x5B89;&#x88C5;" class="headerlink" title="&#x914D;&#x7F6E;&#x548C;&#x5B89;&#x88C5;"></a>&#x914D;&#x7F6E;&#x548C;&#x5B89;&#x88C5;</h3><p>&#x8BBE;&#x5B9A;&#x914D;&#x7F6E;&#x7684;&#x73AF;&#x5883;&#x662F;<code>firstshare</code>&#x3002;</p>
<ol>
<li>&#x590D;&#x5236;conf&#x76EE;&#x5F55;&#x4E0B;local.sh.template&#x4E3A;<code>firstshare.sh</code>&#xFF0C;&#x6839;&#x636E;&#x5B9E;&#x9645;&#x60C5;&#x51B5;&#x4FEE;&#x6539;&#x91CC;&#x9762;&#x5185;&#x5BB9;&#x3002;<br>&#x5176;&#x4E2D;<code>DEPLOY_HOSTS</code>&#x662F;&#x8981;&#x5C06;&#x670D;&#x52A1;&#x90E8;&#x7F72;&#x5230;&#x54EA;&#x53F0;&#x673A;&#x5668;&#x4E0A;&#xFF0C;<code>APP_USER</code>&#x548C;<code>APP_GROUP</code>&#x662F;&#x670D;&#x52A1;&#x6587;&#x4EF6;&#x7684;&#x6240;&#x6709;&#x8005;&#x548C;&#x6240;&#x5728;&#x7EC4;&#x3002;</li>
<li><p>&#x590D;&#x5236;conf&#x76EE;&#x5F55;&#x4E0B;local.conf.template&#x4E3A;<code>firstshare.conf</code>&#xFF0C;&#x6839;&#x636E;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x3002;</p>
<p>&#x9644;&#x4E0A;&#x90E8;&#x5206;&#x914D;&#x7F6E;&#xFF0C;&#x4E3B;&#x8981;&#x4FEE;&#x6539;&#x4E86;&#x4EE5;&#x4E0B;&#x5185;&#x5BB9;&#xFF1A;</p>
<ol>
<li>master&#x4F7F;&#x7528;<code>yarn-client</code>&#xFF0C;&#x4E0D;&#x80FD;&#x662F;<code>yarn-cluster</code>&#xFF0C;<code>yarn-client</code>&#x53EF;&#x4EE5;&#x4FDD;&#x6301;SparkContext&#x4E0D;&#x5173;&#x95ED;&#x3002;</li>
<li>&#x6570;&#x636E;&#x5E93;&#x4F7F;&#x7528;mysql&#x3002;</li>
<li>&#x4FEE;&#x6539;web&#x7AEF;&#x53E3;&#x4E3A;8099</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">spark {</div><div class="line">  master = &quot;yarn-client&quot;</div><div class="line">  jobserver {</div><div class="line">    port = 8099</div><div class="line">    context-per-jvm = false</div><div class="line">    jobdao = spark.jobserver.io.JobSqlDAO #&#x4F7F;&#x7528;file&#x6216;&#x6570;&#x636E;&#x5E93;</div><div class="line">    sqldao {</div><div class="line">      slick-driver=slick.driver.MySQLDriver</div><div class="line">      jdbc-driver=com.mysql.jdbc.Driver</div><div class="line">      jdbc {</div><div class="line">        url=&quot;jdbc:mysql://db_host/spark_jobserver?characterEncoding=UTF-8&quot;</div><div class="line">        user=&quot;secret&quot;</div><div class="line">        password=&quot;secret&quot;</div><div class="line">      }</div><div class="line">    }</div><div class="line">  }</div><div class="line">}</div><div class="line">flyway.locations=&quot;db/mysql/migration&quot;</div></pre></td></tr></table></figure>
</li>
<li><p>&#x5982;&#x6709;&#x9700;&#x8981;&#xFF0C;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;shiro&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x9700;&#x8981;&#x8BBE;&#x7F6E;<code>authentication = on</code>&#x3002;</p>
</li>
<li><code>sh bin/server_deploy.sh firstshare</code>&#x8FDB;&#x884C;&#x5B89;&#x88C5;&#xFF0C;&#x5B89;&#x88C5;&#x8FC7;&#x7A0B;&#x4E2D;&#x9700;&#x8981;&#x51E0;&#x6B21;&#x8F93;&#x5165;&#x5BC6;&#x7801;&#x3002;</li>
<li>&#x4F7F;&#x7528;<code>server_start.sh</code>&#x548C;<code>server_stop.sh</code>&#x8FDB;&#x884C;&#x542F;&#x505C;&#x3002;</li>
</ol>
<h3 id="&#x66F4;&#x65B0;"><a href="#&#x66F4;&#x65B0;" class="headerlink" title="&#x66F4;&#x65B0;"></a>&#x66F4;&#x65B0;</h3><p>&#x5982;&#x679C;&#x5BF9;&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x4E86;&#x66F4;&#x65B0;&#xFF0C;&#x76F4;&#x63A5;&#x4F7F;&#x7528;<code>sbt ++2.10.5 job-server-extras/assembly</code>&#x6253;&#x5305;&#xFF0C;&#x66FF;&#x6362;&#x5B89;&#x88C5;&#x76EE;&#x5F55;&#x4E0B;&#x7684;<code>spark-job-server.jar</code>&#x5373;&#x53EF;&#x3002;</p>
<p>&#x9700;&#x8981;&#x4F7F;&#x7528;&#x81EA;&#x5E26;&#x7684;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#x65F6;&#xFF0C;&#x4F7F;&#x7528;<code>sbt job-server-tests/package</code>&#x8FDB;&#x884C;&#x6253;&#x5305;&#x3002;</p>
<h2 id="api"><a href="#API" class="headerlink" title="API"></a>API</h2><h3 id="jar&#x5305;&#x64CD;&#x4F5C;"><a href="#jar&#x5305;&#x64CD;&#x4F5C;" class="headerlink" title="jar&#x5305;&#x64CD;&#x4F5C;"></a>jar&#x5305;&#x64CD;&#x4F5C;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">GET /jars            - lists all the jars and the last upload timestamp</div><div class="line">POST /jars/&lt;appName&gt; - uploads a new jar under &lt;appName&gt;</div></pre></td></tr></table></figure>
<h4 id="&#x63D0;&#x4EA4;jar&#x5305;"><a href="#&#x63D0;&#x4EA4;jar&#x5305;" class="headerlink" title="&#x63D0;&#x4EA4;jar&#x5305;"></a>&#x63D0;&#x4EA4;jar&#x5305;</h4><p>&#x6253;&#x5305;&#x65F6;&#x4E0D;&#x5EFA;&#x8BAE;&#x6253;assembly&#x5305;&#xFF0C;&#x63A8;&#x8350;&#x4F7F;&#x7528;<code>dependent-jar-uris</code>&#x6765;&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;&#x3002;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">curl --data-binary @job-server-tests/target/scala-2.10/job-server-tests_2.10-0.7.0-SNAPSHOT_cdh-5.7.jar localhost:8099/jars/<span class="built_in">test</span></div><div class="line">curl --data-binary @target/scala-2.10/spark-jobserver-mongo_2.10-1.0.0-SNAPSHOT.jar localhost:8099/jars/<span class="built_in">test</span>-mongo</div></pre></td></tr></table></figure>
<h4 id="&#x67E5;&#x770B;&#x6240;&#x6709;jar&#x5305;"><a href="#&#x67E5;&#x770B;&#x6240;&#x6709;jar&#x5305;" class="headerlink" title="&#x67E5;&#x770B;&#x6240;&#x6709;jar&#x5305;"></a>&#x67E5;&#x770B;&#x6240;&#x6709;jar&#x5305;</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl localhost:8099/jars</div></pre></td></tr></table></figure>
<h3 id="context&#x64CD;&#x4F5C;"><a href="#context&#x64CD;&#x4F5C;" class="headerlink" title="context&#x64CD;&#x4F5C;"></a>context&#x64CD;&#x4F5C;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">GET /contexts               - lists all current contexts</div><div class="line">POST /contexts/&lt;name&gt;       - creates a new context</div><div class="line">DELETE /contexts/&lt;name&gt;     - stops a context and all jobs running in it</div><div class="line">PUT /contexts?reset=reboot  - kills all contexts and re-loads only the contexts from config</div></pre></td></tr></table></figure>
<h4 id="&#x521B;&#x5EFA;context"><a href="#&#x521B;&#x5EFA;context" class="headerlink" title="&#x521B;&#x5EFA;context"></a>&#x521B;&#x5EFA;context</h4><ol>
<li><p>&#x8BBE;&#x5B9A;yarn&#x961F;&#x5217;&#xFF0C;&#x8BBE;&#x5B9A;<code>spark.yarn.queue</code>&#x53C2;&#x6570;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl <span class="_">-d</span> <span class="string">&quot;&quot;</span> <span class="string">&apos;localhost:8099/contexts/test-context?spark.yarn.queue=test&apos;</span></div></pre></td></tr></table></figure>
</li>
<li><p>&#x589E;&#x52A0;&#x4F9D;&#x8D56;jar&#x5305;&#xFF0C;&#x8BBE;&#x5B9A;<code>dependent-jar-uris</code>&#x53C2;&#x6570;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl <span class="_">-d</span> <span class="string">&quot;&quot;</span> <span class="string">&apos;localhost:8099/contexts/mongo-context?spark.yarn.queue=test&amp;dependent-jar-uris=file:///opt/fs/job-server/aux-lib/mongo-spark-connector_2.10-1.1.0.jar,file:///opt/fs/job-server/aux-lib/mongo-java-driver-3.2.2.jar&apos;</span></div></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="&#x5220;&#x9664;context"><a href="#&#x5220;&#x9664;context" class="headerlink" title="&#x5220;&#x9664;context"></a>&#x5220;&#x9664;context</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl -X DELETE localhost:8099/contexts/<span class="built_in">test</span>-context</div></pre></td></tr></table></figure>
<h3 id="job&#x64CD;&#x4F5C;"><a href="#job&#x64CD;&#x4F5C;" class="headerlink" title="job&#x64CD;&#x4F5C;"></a>job&#x64CD;&#x4F5C;</h3><p>&#x8FD9;&#x91CC;&#x7684;job&#x4E0D;&#x662F;&#x666E;&#x901A;&#x7684;spark&#x4EFB;&#x52A1;&#xFF0C;&#x800C;&#x662F;&#x5B9E;&#x73B0;spark-jobserver api&#x7684;&#x4EFB;&#x52A1;&#xFF0C;&#x7EE7;&#x627F;&#x5176;api&#x4E2D;<code>SparkJob</code> trait&#xFF0C;&#x5E76;&#x5B9E;&#x73B0;<code>runJob</code>&#x65B9;&#x6CD5;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">GET /jobs                - Lists the last N jobs</div><div class="line">POST /jobs               - Starts a new job, use ?sync=true to wait for results</div><div class="line">GET /jobs/&lt;jobId&gt;        - Gets the result or status of a specific job</div><div class="line">DELETE /jobs/&lt;jobId&gt;     - Kills the specified job</div><div class="line">GET /jobs/&lt;jobId&gt;/config - Gets the job configuration</div></pre></td></tr></table></figure>
<h4 id="&#x63D0;&#x4EA4;job"><a href="#&#x63D0;&#x4EA4;job" class="headerlink" title="&#x63D0;&#x4EA4;job"></a>&#x63D0;&#x4EA4;job</h4><ol>
<li><p>&#x63D0;&#x4EA4;&#x5E26;&#x53C2;&#x6570;&#x4EFB;&#x52A1;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl <span class="_">-d</span> <span class="string">&quot;input.string = a b c a b see&quot;</span> <span class="string">&apos;localhost:8099/jobs?appName=spark-mongo&amp;classPath=com.fxiaoke.dataplatform.WordCountExample&amp;context=mongo-context&apos;</span></div></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>&#x63D0;&#x4EA4;&#x4EFB;&#x52A1;&#x5230;&#x6307;&#x5B9A;&#x7684;context&#xFF0C;&#x8BBE;&#x7F6E;<code>context</code>&#x53C2;&#x6570;&#x503C;&#xFF0C;context&#x9700;&#x8981;&#x63D0;&#x524D;&#x521B;&#x5EFA;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">curl -X POST <span class="string">&apos;localhost:8099/jobs?appName=spark-mongo&amp;classPath=com.fxiaoke.dataplatform.MongoSparkSQL&amp;context=mongo-context&amp;sync=true&amp;timeout=10000&apos;</span> <span class="_">-d</span> <span class="string">&apos;</span></div><div class="line">{</div><div class="line">  mongo.ip = &quot;192.168.2.19&quot;</div><div class="line">  mongo.database = mydb</div><div class="line">  mongo.collection = myCollection</div><div class="line">  mongo.sql = &quot;select name,age from mydb.myCollection where age &gt;= 20&quot;</div><div class="line">}</div><div class="line">&apos;</div></pre></td></tr></table></figure>
</li>
<li><p>&#x7B49;&#x5F85;&#x4EFB;&#x52A1;&#x6267;&#x884C;&#x5B8C;&#x6210;&#xFF0C;&#x8BBE;&#x5B9A;<code>sync=true</code>&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;<code>timeout</code>&#x53C2;&#x6570;&#xFF0C;&#x9ED8;&#x8BA4;40s&#x3002;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl <span class="_">-d</span> <span class="string">&quot;input.string = a b c a b see&quot;</span> <span class="string">&apos;localhost:8099/jobs?appName=test&amp;classPath=spark.jobserver.WordCountExample&amp;sync=true&amp;timeout=10000000&apos;</span></div></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="&#x67E5;&#x770B;job&#x4FE1;&#x606F;"><a href="#&#x67E5;&#x770B;job&#x4FE1;&#x606F;" class="headerlink" title="&#x67E5;&#x770B;job&#x4FE1;&#x606F;"></a>&#x67E5;&#x770B;job&#x4FE1;&#x606F;</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">$ curl localhost:8099/<span class="built_in">jobs</span>/1b8f60f8-067e-4d83-b198-8<span class="built_in">fc</span>6017227e8</div><div class="line">{</div><div class="line">  <span class="string">&quot;duration&quot;</span>: <span class="string">&quot;3.0 secs&quot;</span>,</div><div class="line">  <span class="string">&quot;classPath&quot;</span>: <span class="string">&quot;com.fxiaoke.dataplatform.MongoSparkSQL&quot;</span>,</div><div class="line">  <span class="string">&quot;startTime&quot;</span>: <span class="string">&quot;2016-10-21T18:37:01.000+08:00&quot;</span>,</div><div class="line">  <span class="string">&quot;context&quot;</span>: <span class="string">&quot;mongo-context&quot;</span>,</div><div class="line">  <span class="string">&quot;result&quot;</span>: [<span class="string">&quot;{\&quot;name\&quot;:\&quot;Thorin\&quot;,\&quot;age\&quot;:195}&quot;</span>, <span class="string">&quot;{\&quot;name\&quot;:\&quot;Balin\&quot;,\&quot;age\&quot;:178}&quot;</span>, <span class="string">&quot;{\&quot;name\&quot;:\&quot;Dwalin\&quot;,\&quot;age\&quot;:169}&quot;</span>, <span class="string">&quot;{\&quot;name\&quot;:\&quot;\u00d3in\&quot;,\&quot;age\&quot;:167}&quot;</span>, <span class="string">&quot;{\&quot;name\&quot;:\&quot;Gl\u00f3in\&quot;,\&quot;age\&quot;:158}&quot;</span>],</div><div class="line">  <span class="string">&quot;status&quot;</span>: <span class="string">&quot;FINISHED&quot;</span>,</div><div class="line">  <span class="string">&quot;jobId&quot;</span>: <span class="string">&quot;1b8f60f8-067e-4d83-b198-8fc6017227e8&quot;</span></div><div class="line">}</div></pre></td></tr></table></figure>
<h2 id="&#x521B;&#x5EFA;spark-jobserver&#x5DE5;&#x7A0B;"><a href="#&#x521B;&#x5EFA;Spark-JobServer&#x5DE5;&#x7A0B;" class="headerlink" title="&#x521B;&#x5EFA;Spark JobServer&#x5DE5;&#x7A0B;"></a>&#x521B;&#x5EFA;Spark JobServer&#x5DE5;&#x7A0B;</h2><h3 id="&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;"><a href="#&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;" class="headerlink" title="&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;"></a>&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;</h3><p>&#x7531;&#x4E8E;&#x81EA;&#x5DF1;&#x4FEE;&#x6539;&#x4E86;spark-jobserver&#x4EE3;&#x7801;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x751F;&#x6210;api jar&#x5305;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>sbt publish-local</code>&#x547D;&#x4EE4;&#xFF0C;&#x6253;&#x5305;&#x5E76;publish&#x5230;&#x672C;&#x5730;ivy&#x4ED3;&#x5E93;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">sbt ++2.10.5 job-server-api/publish-local </div><div class="line">sbt ++2.10.5 job-server/publish-local </div><div class="line">sbt ++2.10.5 job-server-extras/publish-local </div><div class="line">sbt ++2.10.5 akka-app/publish-local</div></pre></td></tr></table></figure>
<p>&#x5728;<code>build.sbt</code>&#x4E2D;&#x6DFB;&#x52A0;spark-jobserver&#x4F9D;&#x8D56;&#xFF0C;&#x5176;&#x4ED6;&#x4F9D;&#x8D56;&#x6309;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x3002;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">libraryDependencies += &quot;spark.jobserver&quot; %% &quot;job-server-api&quot; % &quot;0.7.0-SNAPSHOT_cdh-5.7&quot; % &quot;provided&quot;</div><div class="line">libraryDependencies += &quot;spark.jobserver&quot; %% &quot;job-server-extras&quot; % &quot;0.7.0-SNAPSHOT_cdh-5.7&quot; % &quot;provided&quot;</div></pre></td></tr></table></figure></p>
<h3 id="sparkjob-api"><a href="#SparkJob-API" class="headerlink" title="SparkJob API"></a>SparkJob API</h3><p>0.7&#x7248;&#x672C;&#x7684;spark jobserver&#x4F7F;&#x7528;&#x4E86;&#x65B0;&#x7684;api&#xFF0C;&#x76F4;&#x63A5;&#x7EE7;&#x627F;<code>SparkJob</code>&#xFF0C;&#x5E76;&#x5B9E;&#x73B0;<code>runJob</code>&#x548C;<code>validate</code>&#x65B9;&#x6CD5;&#x5373;&#x53EF;&#x3002;</p>
<p>&#x793A;&#x4F8B;:</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> com.typesafe.config.<span class="type">Config</span></div><div class="line"><span class="keyword">import</span> org.apache.spark.<span class="type">SparkContext</span></div><div class="line"><span class="keyword">import</span> org.scalactic._</div><div class="line"><span class="keyword">import</span> spark.jobserver.api.{<span class="type">JobEnvironment</span>, <span class="type">SingleProblem</span>, <span class="type">SparkJob</span>, <span class="type">ValidationProblem</span>}</div><div class="line"><span class="keyword">import</span> scala.util.<span class="type">Try</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">object</span> <span class="title">WordCountExample</span> <span class="keyword">extends</span> <span class="title">SparkJob</span> </span>{</div><div class="line">  <span class="class"><span class="keyword">type</span> <span class="title">JobData</span> </span>= <span class="type">Seq</span>[<span class="type">String</span>]      <span class="comment">//&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;JobData&#x548C;JobOutput&#x7C7B;&#x578B;</span></div><div class="line">  <span class="class"><span class="keyword">type</span> <span class="title">JobOutput</span> </span>= collection.<span class="type">Map</span>[<span class="type">String</span>, <span class="type">Long</span>] </div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">runJob</span></span>(sc: <span class="type">SparkContext</span>, runtime: <span class="type">JobEnvironment</span>, data: <span class="type">JobData</span>): <span class="type">JobOutput</span> = {</div><div class="line">    sc.parallelize(data).countByValue</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">validate</span></span>(sc: <span class="type">SparkContext</span>, runtime: <span class="type">JobEnvironment</span>, config: <span class="type">Config</span>): <span class="type">JobData</span> <span class="type">Or</span> <span class="type">Every</span>[<span class="type">ValidationProblem</span>] = {</div><div class="line">    <span class="type">Try</span>(config.getString(<span class="string">&quot;input.string&quot;</span>).split(<span class="string">&quot; &quot;</span>).toSeq)</div><div class="line">      .map(words =&gt; <span class="type">Good</span>(words))</div><div class="line">      .getOrElse(<span class="type">Bad</span>(<span class="type">One</span>(<span class="type">SingleProblem</span>(<span class="string">&quot;No input.string param&quot;</span>))))</div><div class="line">  }</div><div class="line">}</div></pre></td></tr></table></figure>
<h3 id="named-objects"><a href="#Named-Objects" class="headerlink" title="Named Objects"></a>Named Objects</h3><p>&#x53C2;&#x8003;<a href="https://github.com/spark-jobserver/spark-jobserver#named-objects" target="_blank" rel="external">https://github.com/spark-jobserver/spark-jobserver#named-objects</a></p>
<p>&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x81EA;&#x5B9A;&#x4E49;&#x7684;RDD&#x548C;&#x5BF9;&#x8C61;&#xFF0C;&#x5728;&#x591A;&#x4E2A;job&#x5171;&#x4EAB;rdd&#x3002;</p>
<h2 id="exceptions"><a href="#Exceptions" class="headerlink" title="Exceptions"></a>Exceptions</h2><ol>
<li><p>Exception in thread &#x201C;main&#x201D; java.lang.NoSuchMethodError: akka.util.Helpers$.ConfigOps(Lcom/typesafe/config/Config;)Lcom/typesafe/config/Config;</p>
<p>&#x8FD9;&#x662F;&#x7531;&#x4E8E;CDH5.7&#x4E2D;akka&#x7248;&#x672C;&#x6BD4;&#x8F83;&#x4F4E;&#xFF0C;&#x800C;spark-jobserver&#x4E2D;akka&#x7248;&#x672C;&#x6BD4;&#x8F83;&#x9AD8;&#x5F15;&#x8D77;&#x7684;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6DFB;&#x52A0;cdh&#x652F;&#x6301;&#x7684;&#x7248;&#x672C;<a href="https://github.com/bjoernlohrmann/spark-jobserver" target="_blank" rel="external">https://github.com/bjoernlohrmann/spark-jobserver</a>&#xFF0C;&#x627E;&#x5230;&#x9002;&#x7528;&#x4E8E;CDH&#x7684;&#x5206;&#x652F;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x7684;&#x662F;<code>0.7.0-SNAPSHOT_cdh-5.7</code>&#x3002;</p>
<p>&#x53C2;&#x8003;:</p>
<ul>
<li><a href="https://github.com/spark-jobserver/spark-jobserver/issues/394" target="_blank" rel="external">https://github.com/spark-jobserver/spark-jobserver/issues/394</a></li>
<li><a href="https://github.com/spark-jobserver/spark-jobserver/issues/592" target="_blank" rel="external">https://github.com/spark-jobserver/spark-jobserver/issues/592</a></li>
</ul>
</li>
<li><p>org.apache.spark.SparkException: Found both spark.executor.extraClassPath and SPARK_CLASSPATH. Use only the former.</p>
<p>&#x5220;&#x9664;<code>spark-env.sh</code>&#x4E2D;&#x7684;<code>SPARK_CLASSPATH</code>. Spark1.4&#x4E4B;&#x540E;&#x4E0D;&#x518D;&#x4F7F;&#x7528;<code>SPARK_CLASSPATH</code>&#xFF0C;&#x4F7F;&#x7528;spark-defaults.conf&#x4E2D;<code>spark.executor.extraClassPath</code>&#x4EE3;&#x66FF;&#x3002;</p>
</li>
<li><p>java.lang.NoSuchMethodError: org.joda.time.DateTime.now()<br>spark-jobserver&#x4E2D;joda-time&#x7248;&#x672C;(2.9.3)&#x4E0E;CDH5.7&#x4E2D;joda-time&#x7248;&#x672C;(1.6)&#x51B2;&#x7A81;&#xFF0C;&#x5C06;spark-jobserver&#x4E2D;joda-time&#x7248;&#x672C;&#x964D;&#x5230;1.6&#xFF0C;&#x5E76;&#x5C06;<code>DateTime.now()</code>&#x5168;&#x90E8;&#x66FF;&#x6362;&#x4E3A;<code>new DateTime()</code>&#x3002;</p>
</li>
<li><p>&#x63D0;&#x4EA4;job&#x540E;&#x65E0;&#x6CD5;&#x67E5;&#x770B;job&#x4FE1;&#x606F;&#x548C;&#x7ED3;&#x679C;<br>&#x53C2;&#x89C1;<a href="https://github.com/spark-jobserver/spark-jobserver/issues/516" target="_blank" rel="external">github issue#516</a><br>&#x5DF2;&#x7ECF;&#x89E3;&#x51B3;&#xFF0C;<a href="https://github.com/spark-jobserver/spark-jobserver/commit/109210c6786f915130b4d40eb62033bfa4c91469" target="_blank" rel="external">commit#109210c</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git cherry-pick 109210c</div></pre></td></tr></table></figure>
</li>
<li><p>&#x66F4;&#x65B0;jar&#x5305;&#x540E;&#xFF0C;&#x5728;&#x540C;&#x4E00;&#x4E2A;context&#x4E2D;&#x6267;&#x884C;&#xFF0C;&#x53D1;&#x73B0;&#x7ED3;&#x679C;&#x6CA1;&#x6709;&#x968F;jar&#x5305;&#x66F4;&#x65B0;&#x800C;&#x66F4;&#x65B0;<br>&#x5176;&#x5B9E;&#x8FD9;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;bug&#x6216;exception&#xFF0C;&#x53C2;&#x89C1;<a href="https://github.com/spark-jobserver/spark-jobserver/issues/218" target="_blank" rel="external">github issue#218</a></p>
<blockquote>
<p>What is happening is this. Each SparkContext has one custom classloader. In the JVM you cannot update JAR code live &#x2013; it&#x2019;s not a job server limitation, but a fundamental JVM limitation. Once you load in the classes for jar1, you cannot try to load in newer versions of those classes, because the classloader will keep using the class names that are already loaded.</p>
</blockquote>
</li>
<li><p>&#x4F7F;&#x7528;mysql&#x4F5C;&#x4E3A;&#x6570;&#x636E;&#x5E93;&#x540E;&#xFF0C;&#x63D0;&#x4EA4;&#x7684;job&#x72B6;&#x6001;&#x9ED8;&#x8BA4;&#x662F;FINISHED<br>&#x5728;<code>WebApi.scala</code>&#x6587;&#x4EF6;&#x4E2D;&#x67E5;&#x770B;<code>getJobReport</code>&#x65B9;&#x6CD5;</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">getJobReport</span></span>(jobInfo: <span class="type">JobInfo</span>, jobStarted: <span class="type">Boolean</span> = <span class="literal">false</span>): <span class="type">Map</span>[<span class="type">String</span>, <span class="type">Any</span>] = {</div><div class="line">  <span class="keyword">val</span> statusMap = <span class="keyword">if</span> (jobStarted) <span class="type">Map</span>(<span class="type">StatusKey</span> -&gt; <span class="string">&quot;STARTED&quot;</span>) <span class="keyword">else</span> (jobInfo <span class="keyword">match</span> {</div><div class="line">      <span class="keyword">case</span> <span class="type">JobInfo</span>(_, _, _, _, _, <span class="type">None</span>, _) =&gt; <span class="type">Map</span>(<span class="type">StatusKey</span> -&gt; <span class="string">&quot;RUNNING&quot;</span>)      <span class="comment">//&#x6CE8;&#x91CA;1: &#x5F53;END_TIME&#x4E3A;NONE&#xFF0C;&#x5C31;&#x5224;&#x65AD;&#x4E3A;RUNNING</span></div><div class="line">      <span class="keyword">case</span> <span class="type">JobInfo</span>(_, _, _, _, _, _, <span class="type">Some</span>(ex)) =&gt; <span class="type">Map</span>(<span class="type">StatusKey</span> -&gt; <span class="string">&quot;ERROR&quot;</span>,</div><div class="line">        <span class="type">ResultKey</span> -&gt; formatException(ex))</div><div class="line">      <span class="keyword">case</span> <span class="type">JobInfo</span>(_, _, _, _, _, <span class="type">Some</span>(e), <span class="type">None</span>) =&gt; <span class="type">Map</span>(<span class="type">StatusKey</span> -&gt; <span class="string">&quot;FINISHED&quot;</span>) <span class="comment">//&#x6CE8;&#x91CA;2</span></div><div class="line">  })</div><div class="line">  <span class="type">Map</span>(<span class="string">&quot;jobId&quot;</span> -&gt; jobInfo.jobId,</div><div class="line">    <span class="string">&quot;startTime&quot;</span> -&gt; jobInfo.startTime.toString(),</div><div class="line">    <span class="string">&quot;classPath&quot;</span> -&gt; jobInfo.classPath,</div><div class="line">    <span class="string">&quot;context&quot;</span> -&gt; (<span class="keyword">if</span> (jobInfo.contextName.isEmpty) <span class="string">&quot;&lt;&lt;ad-hoc&gt;&gt;&quot;</span> <span class="keyword">else</span> jobInfo.contextName),</div><div class="line">    <span class="string">&quot;duration&quot;</span> -&gt; getJobDurationString(jobInfo)) ++ statusMap</div><div class="line">}</div></pre></td></tr></table></figure>
</li>
</ol>
<p>  &#x4ECE;&#x6CE8;&#x91CA;1&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x5F53;&#x7B2C;&#x516D;&#x4E2A;&#x53C2;&#x6570;&#x5373;END_TIME&#x4E3A;None&#x65F6;&#xFF0C;&#x4EFB;&#x52A1;job&#x5904;&#x4E8E;RUNNING&#x72B6;&#x6001;&#x3002;<br>  &#x4F46;&#x5728;mysql&#x7684;JOBS&#x8868;&#x4E2D;&#xFF0C;<code>END_TIME</code>&#x5B57;&#x6BB5;&#x4E3A;<code>timestamp</code>&#x7C7B;&#x578B;&#xFF0C;&#x6709;&#x9ED8;&#x8BA4;&#x503C;&#x201D;0000-00-00 00:00&#x201D;&#xFF0C;&#x6240;&#x4EE5;&#x4E00;&#x76F4;&#x6709;&#x503C;&#xFF0C;&#x8D70;&#x5230;&#x6CE8;&#x91CA;2&#x5904;&#xFF0C;&#x8868;&#x73B0;&#x4E3A;FINISHED&#x3002;</p>
<p>  &#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF1A;<br>  &#x8BBE;&#x7F6E;mysql&#x7684;END_TIME&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;null&#x3002;&#x5728;mysql&#x4E2D;<code>timestamp</code>&#x7C7B;&#x578B;&#x6BD4;&#x8F83;&#x7279;&#x6B8A;&#xFF0C;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;<code>default NULL</code>&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x503C;&#x3002;</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">alter table JOBS  modify column END_TIME timestamp NULL;</div></pre></td></tr></table></figure>
<h2 id="&#x53C2;&#x8003;"><a href="#&#x53C2;&#x8003;" class="headerlink" title="&#x53C2;&#x8003;"></a>&#x53C2;&#x8003;</h2><ol>
<li><a href="http://stackoverflow.com/questions/20365975/add-local-dependency-jar-in-sbt-scalatra-project" target="_blank" rel="external">sbt publish local jar</a></li>
<li><a href="http://www.importnew.com/4311.html" target="_blank" rel="external">Scala&#x6559;&#x7A0B;&#xFF1A;&#x7B80;&#x5355;&#x6784;&#x5EFA;&#x5DE5;&#x5177;SBT</a></li>
<li><a href="http://wzktravel.github.io/2016/10/20/use-local-maven-repository-faster-sbt/">&#x4F7F;&#x7528;&#x672C;&#x5730;maven&#x79C1;&#x670D;&#x52A0;&#x901F;sbt&#x4E0B;&#x8F7D;</a></li>
</ol>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://wzktravel.github.io/2016/10/26/spark-job-server/" data-id="civrjwp3g0042v59kp04l8exd" class="article-share-link" data-share="baidu" data-title="Spark jobserver的安装和使用">分享到</a>
      

      
        <a href="http://wzktravel.github.io/2016/10/26/spark-job-server/#ds-thread" class="article-comment-link">评论</a>
      

      
        <span id="busuanzi_container_page_pv" style='display:none;float:right;margin-right:20px;color:#999;'>view <span id="busuanzi_value_page_pv"></span> times</span>
      
  
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/spark/">spark</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/10/26/shudown-kafka-broker/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">
        
          主动下线kafka broker
        
      </div>
    </a>
  
  
    <a href="/2016/10/20/use-local-maven-repository-faster-sbt/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">使用本地maven私服加速sbt下载</div>
    </a>
  
</nav>

  
</article>


  <section id="comments">
    <div id="ds-thread" class="ds-thread" data-thread-key="2016/10/26/spark-job-server/" data-title="Spark jobserver的安装和使用" data-url="http://wzktravel.github.io/2016/10/26/spark-job-server/"></div>
  </section>

</section>
      
      <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/azkaban/">azkaban</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cdh/">cdh</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elasticsearch/">elasticsearch</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flume/">flume</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hadoop/">hadoop</a><span class="tag-list-count">17</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hbase/">hbase</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hdfs/">hdfs</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hive/">hive</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jodatime/">jodatime</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kafka/">kafka</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kerberos/">kerberos</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mac/">mac</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/">maven</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongo/">mongo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/postgres/">postgres</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/quartz/">quartz</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sbt/">sbt</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/scala/">scala</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/schedule/">schedule</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sentry/">sentry</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/">shell</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spark/">spark</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql/">sql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/thread/">thread</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim/">vim</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yarn/">yarn</a><span class="tag-list-count">3</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/azkaban/" style="font-size: 10px;">azkaban</a> <a href="/tags/cdh/" style="font-size: 16.25px;">cdh</a> <a href="/tags/elasticsearch/" style="font-size: 12.5px;">elasticsearch</a> <a href="/tags/flume/" style="font-size: 11.25px;">flume</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/github/" style="font-size: 11.25px;">github</a> <a href="/tags/hadoop/" style="font-size: 20px;">hadoop</a> <a href="/tags/hbase/" style="font-size: 11.25px;">hbase</a> <a href="/tags/hdfs/" style="font-size: 12.5px;">hdfs</a> <a href="/tags/hive/" style="font-size: 12.5px;">hive</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/jodatime/" style="font-size: 10px;">jodatime</a> <a href="/tags/kafka/" style="font-size: 11.25px;">kafka</a> <a href="/tags/kerberos/" style="font-size: 12.5px;">kerberos</a> <a href="/tags/linux/" style="font-size: 18.75px;">linux</a> <a href="/tags/mac/" style="font-size: 11.25px;">mac</a> <a href="/tags/maven/" style="font-size: 10px;">maven</a> <a href="/tags/mongo/" style="font-size: 10px;">mongo</a> <a href="/tags/postgres/" style="font-size: 10px;">postgres</a> <a href="/tags/quartz/" style="font-size: 10px;">quartz</a> <a href="/tags/sbt/" style="font-size: 10px;">sbt</a> <a href="/tags/scala/" style="font-size: 12.5px;">scala</a> <a href="/tags/schedule/" style="font-size: 11.25px;">schedule</a> <a href="/tags/sentry/" style="font-size: 10px;">sentry</a> <a href="/tags/shell/" style="font-size: 17.5px;">shell</a> <a href="/tags/spark/" style="font-size: 13.75px;">spark</a> <a href="/tags/sql/" style="font-size: 10px;">sql</a> <a href="/tags/thread/" style="font-size: 10px;">thread</a> <a href="/tags/vim/" style="font-size: 11.25px;">vim</a> <a href="/tags/yarn/" style="font-size: 12.5px;">yarn</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">十一月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">九月 2015</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">八月 2015</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">六月 2015</a><span class="archive-list-count">5</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">近期文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/11/17/oozie-sqoop/">Oozie中添加sqoop用到的jdbc包</a>
          </li>
        
          <li>
            <a href="/2016/11/17/iostat/">Linux iostat监测IO状态</a>
          </li>
        
          <li>
            <a href="/2016/11/06/read-file-in-jar/">读取jar包中文件</a>
          </li>
        
          <li>
            <a href="/2016/10/26/shudown-kafka-broker/">主动下线kafka broker</a>
          </li>
        
          <li>
            <a href="/2016/10/26/spark-job-server/">Spark jobserver的安装和使用</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">友情链接</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="" target="_blank">作者</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 wzktravel<br>
      Powered by <a href="//hexo.io/" target="_blank">Hexo</a>
      .
      Theme by <a href="https://github.com/xiangming/landscape-plus" target="_blank">Landscape-plus</a>
      .
      <span id="busuanzi_container_site_pv" style="display:none">view <span id="busuanzi_value_site_pv"></span> times</span>
    </div>
  </div>
</footer>

  </div>
  <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
  <!-- totop start -->
<div id="totop">
<a title="返回顶部"><img src="/img/scrollup.png"/></a>
</div>

<!-- totop end -->

<!-- 多说公共js代码 start -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"wzktravel"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- 多说公共js代码 end -->


<!-- 百度分享 start -->

<div id="article-share-box" class="article-share-box">
  <div id="bdshare" class="bdsharebuttonbox article-share-links">
    <a class="article-share-weibo" data-cmd="tsina" title="分享到新浪微博"></a>
    <a class="article-share-weixin" data-cmd="weixin" title="分享到微信"></a>
    <a class="article-share-qq" data-cmd="sqq" title="分享到QQ"></a>
    <a class="article-share-renren" data-cmd="renren" title="分享到人人网"></a>
    <a class="article-share-more" data-cmd="more" title="更多"></a>
  </div>
</div>
<script>
  function SetShareData(cmd, config) {
    if (shareDataTitle && shareDataUrl) {
      config.bdText = shareDataTitle;
      config.bdUrl = shareDataUrl;
    }
    return config;
  }
  window._bd_share_config={
    "common":{onBeforeClick: SetShareData},
    "share":{"bdCustomStyle":"/css/bdshare.css"}
  };
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

<!-- 百度分享 end -->

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>




<script src="/js/script.js"></script>

</div>
</body>
</html>
